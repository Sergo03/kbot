name: KBOT-CICD

on: push

jobs:
  ci: 
      name: CI
      runs-on: ubuntu-latest

      steps:
        - name: Checkout
          uses: actions/checkout@v3

        - name: Run test
          run: make test 
        - name: Authenticate to Google Cloud
          id: auth
        - uses: RafikFarhad/push-to-gcr-github-action@v5-beta
        with:
          gcloud_service_key: ${{ secrets.GCLOUD_SERVICE_KEY }}
          registry: gcr.io
          project_id: telegram-bot-385708
          
      